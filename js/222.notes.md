**Local storage info. Todo.js filas su komentarais 2021 07 03**

```js
class Todo {
  constructor(IDselector) {
    this.IDselector = IDselector;

    this.DOM = null;
    this.listDOM = null;
    this.newMessageDOM = null;
    this.newBorderColorDOM = null;
    this.buttonSaveDOM = null;

    // Jei informacija yra naudoti ja o jei nera naudoti tuscia masyva. Jei bus tik [] local storage informacija bus isstrinama.
    // JSON.parse naudojama informacijai dekoduoti (isparsinti), refresinus info bus is=rasoma toliau, sekanti karta refreshinus.
    // Atskaitos taskas bus paskutine zinute kuri buvo irasyta iki refreshinimo
    // jei projektas prasideda nuo nulio reikia || (?? - kai kurios narsykles priima ir tokia versija, naujasnios narsykles) []
    this.messages = JSON.parse(localStorage.getItem('messages')) || [];

    this.init();
  }

  init() {
    if (!this.isValidSelector()) {
      return false;
    }

    this.DOM = document.getElementById(this.IDselector);
    if (!this.DOM) {
      console.error('ERROR: nerasta vieta, pagal duota selector');
      return false;
    }
    this.DOM.classList.add('todo');

    this.render();
    this.renderList();
    this.addEvents();
  }

  isValidSelector() {
    if (typeof this.IDselector !== 'string' || this.IDselector === '') {
      console.error('ERROR: nevalidus selector');
      return false;
    }
    return true;
  }

  generateAddForm() {
    return `<form>
                    <label for="new_text">Message</label>
                    <input id="new_text" type="text">
                    <label for="new_border_color">Border color</label>
                    <input id="new_border_color" type="color">
                    <button id="save_button" type="submit">Save</button>
                    <button type="reset">Reset</button>
                </form>`;
  }

  generateUpdateForm() {
    return `<form class="hide">
                    <label for="updated_text">Message</label>
                    <input id="updated_text" type="text" value=""> // defaultine teksto reiksme bus tuscias tekstas
                    <label for="updated_border_color">Border color</label>
                    <input id="updated_border_color" type="color" value="#2233"> //defaultine borderio spalva bus #2233
                    <button type="submit">Update</button>
                    <button type="button">Cancel</button>
                </form>`;
  }

  generateList() {
    return `<div class="list"></div>`;
  }
  //kai buvo ispiestas bazinis HTML
  renderList() {
    for (const task of this.messages) {
      //renderTAsk duodame ka reikia ispiesti
      this.renderTask(task.messageText, task.borderColor);
    }
  }

  //piesia uzduotis renderTask, praso teksto (task.messageText) ir spalvos (task.borderColor) is 77 eilutes
  renderTask(text, borderColor = '#ccc') {
    if (typeof text !== 'string' || text === '') {
      return '';
    }
    const HTML = `<div class="task" style="border-color: ${borderColor}">
                            <div class="text">${text}</div>
                            <div class="actions">
                                <div class="btn edit">Edit</div>
                                <div class="btn delete">Delete</div>
                            </div>
                        </div>`;

    this.listDOM.insertAdjacentHTML('afterbegin', HTML);
  }

  render() {
    let HTML = '';
    HTML += this.generateAddForm();
    HTML += this.generateUpdateForm();
    HTML += this.generateList();
    this.DOM.innerHTML = HTML;

    this.listDOM = this.DOM.querySelector('.list');
    this.newMessageDOM = document.getElementById('new_text');
    this.newBorderColorDOM = document.getElementById('new_border_color');
    this.buttonSaveDOM = document.getElementById('save_button');
  }

  addEvents() {
    //Ivedama i forma informacija ir pasirenkama border spalva ir mes ta informacija issitruakiam (107, 108)
    this.buttonSaveDOM.addEventListener('click', (e) => {
      e.preventDefault();
      const message = this.newMessageDOM.value;
      const color = this.newBorderColorDOM.value;
      // reikalinga apsauga jei bus tuscias tekstas nieko negrazins
      if (message === '') {
        return false;
      }
      //nupiesiam interface ta reikala
      this.renderTask(message, color);

      //isimename i atminti
      this.messages.push({
        messageText: message,
        borderColor: color,
      });
      //atnaujiname local storage informacija. Parefreshinus puslapi informacija lieka local storage, ji nera istrinama tol kol refreshinus vel ivedamas naujas tekstas
      //jei esame nurode kad thic=s.message = []; tuscias sarasas
      localStorage.setItem('messages', JSON.stringify(this.messages));
    });
  }
}

export { Todo };
```
